<html>
  <script>

    // Função para arredondar
    function round(value) {
      return Math.round(value * 100) / 100;
    }

    // Função para calcular os juros
    function calculateFees(value) {
      return round(value * 0.1);
    }

    // Função para calcular o rendimento
    function calculateIncome(value) {
      return round(value * 0.005);
    }

    function calculateBalance(month, prevBalance, releases) {
      console.log(month);

      balance = prevBalance;
      for (release of releases) {
        if (release.type === 'receita') {
          balance += release.value;
        }
        if (release.type === 'despesa') {
          balance -= release.value;
        }
      }
      isNegative = balance < 0;

      // balance = saldo
      // fees = juros
      // income = rendimento

      if (isNegative) {
        fees = calculateFees(balance);
        balance = round(balance + fees);
      } else {
        income = calculateIncome(balance);
        balance = round(balance + income);
      }

      return balance;
    }

    openingBalance = 0;

    januaryReleases = [
      { category: 'Salário', type: 'receita', value: 3000 }, 
      { category: 'Aluguel', type: 'despesa', value: 1000 }, 
      { category: 'Conta de Luz', type: 'despesa', value: 100 }, 
      { category: 'Conta de Água', type: 'despesa', value: 200 }, 
      { category: 'Internet', type: 'despesa', value: 100 }, 
      { category: 'Transporte', type: 'despesa', value: 300 }, 
      { category: 'Lazer', type: 'despesa', value: 300 }, 
      { category: 'Alimentação', type: 'despesa', value: 500 }, 
      { category: 'Condomínio', type: 'despesa', value: 300 }, 
      { category: 'Farmácia', type: 'despesa', value: 100 }
    ];

    balance1 = calculateBalance(
      'Janeiro 2024',
      openingBalance,
      januaryReleases
    );
    console.log(balance1);

    februaryReleases = [
      { category: 'Salário', type: 'receita', value: 3000 },
      { category: 'Aluguel', type: 'despesa', value: 1200 },
      { category: 'Conta de Luz', type: 'despesa', value: 100 },
      { category: 'Conta de Água', type: 'despesa', value: 250 },
      { category: 'Internet', type: 'despesa', value: 100 },
      { category: 'Transporte', type: 'despesa', value: 500 },
      { category: 'Lazer', type: 'despesa', value: 0 },
      { category: 'Alimentação', type: 'despesa', value: 1000 },
      { category: 'Condomínio', type: 'despesa', value: 400 },
      { category: 'Farmácia', type: 'despesa', value: 0 }
    ];

    balance2 = calculateBalance('Fevereiro 2024', balance1, februaryReleases);
    console.log(balance2);

    marchReleases = [
      { category: 'Salário', type: 'receita', value: 4000 },
      { category: 'Aluguel', type: 'despesa', value: 1200 },
      { category: 'Conta de Luz', type: 'despesa', value: 200 },
      { category: 'Conta de Água', type: 'despesa', value: 100 },
      { category: 'Internet', type: 'despesa', value: 200 },
      { category: 'Transporte', type: 'despesa', value: 500 },
      { category: 'Lazer', type: 'despesa', value: 800 },
      { category: 'Alimentação', type: 'despesa', value: 1000 },
      { category: 'Condomínio', type: 'despesa', value: 400 },
      { category: 'Farmácia', type: 'despesa', value: 0 }
    ];

    balance3 = calculateBalance('Março 2024', balance2, marchReleases);
    console.log(balance3);

    console.log('Total ano');
    cumulativeYear = balance3;
    console.log(cumulativeYear);

  </script>
</html>
